---
title: "Create Kubernetes Cluster in Proxmox Using Talos"
date: 2025-04-28T14:31:17+07:00
tags: ["kubernetes", "talos", "proxmox", "homelab"]
draft: true
---

## Introduction

Talos is a container optimized Linux distro; a reimagining of Linux for
distributed systems such as Kubernetes. Designed to be as minimal as possible
while still maintaining practicality.

## Installation

Regardless of where you run Talos, the steps to create a Kubernetes cluster are:

- boot machines off the Talos Linux image
- define the endpoint for the Kubernetes API and generate your machine configurations
- configure Talos Linux by applying machine configurations to the machines
- configure talosctl
- bootstrap Kubernetes

### Pre-requisites

talosctl is a CLI tool which interfaces with the Talos API. Talos Linux has no
SSH access: talosctl is the tool you use to interact with the operating system
on the machines.

### Network access

We configure our DHCP server to assign static IP addresses for the VMs that we
use in our cluster.

| hostname           | IP          |
| ------------------ | ----------- |
| talos-controller-1 | 10.10.10.11 |
| talos-worker-1     | 10.10.10.21 |

### Talos Image Factory

The [Talos Linux Image Factory](https://factory.talos.dev/), developed by
[Sidero Labs, Inc.](https://siderolabs.com/), offers a method to download
various boot assets for [Talos Linux](https://talos.dev/).

For more information about the Image Factory API and the available image
formats, please visit [the GitHub
repository](https://github.com/siderolabs/talos-image-factory).

For our experiment, we will use the following image schematic ID generated by
the Image Factory to suit our Proxmox environment:
[df227a758d9635f2dc034e8d4580518d889592c763d7b1d8179f8810da999e36](https://factory.talos.dev/?arch=amd64&board=undefined&cmdline=-console+console%3Dtty0+console%3DttyS0+net.ifnames%3D0&cmdline-set=true&extensions=-&extensions=siderolabs%2Fqemu-guest-agent&extensions=siderolabs%2Futil-linux-tools&platform=metal&secureboot=undefined&target=metal&version=1.9.5)

```yaml
customization:
  extraKernelArgs:
    - -console
    - console=tty0
    - console=ttyS0
    - net.ifnames=0
  systemExtensions:
    officialExtensions:
      - siderolabs/qemu-guest-agent
      - siderolabs/util-linux-tools
```

## References

- [System Requirements](https://www.talos.dev/latest/introduction/system-requirements/)
- [Production Notes](https://www.talos.dev/latest/introduction/prodnotes/)
- [Support Matrix](https://www.talos.dev/latest/introduction/support-matrix/)
- [Troubleshooting](https://www.talos.dev/latest/introduction/troubleshooting/)
- [Proxmox Installation](https://www.talos.dev/latest/talos-guides/install/virtualized-platforms/proxmox/)
